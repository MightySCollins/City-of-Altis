{"filter":false,"title":"fn_jailSys.sqf","tooltip":"/Extracted Code/Addon/life_server/Functions/Jail/fn_jailSys.sqf","undoManager":{"mark":0,"position":0,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":14,"column":60},"action":"remove","lines":["/*","\tFile: fn_jailSys.sqf","\tAuthor: Bryan \"Tonic\" Boardwine","\t","\tDescription:","\tI forget?","*/","private[\"_unit\",\"_bad\",\"_id\",\"_ret\"];","_unit = [_this,0,Objnull,[Objnull]] call BIS_fnc_param;","if(isNull _unit) exitWith {};","_bad = [_this,1,false,[false]] call BIS_fnc_param;","_id = owner _unit;","","_ret = [_unit] call life_fnc_wantedPerson;","[[_ret,_bad],\"life_fnc_jailMe\",_id,false] spawn life_fnc_MP;"]},{"start":{"row":0,"column":0},"end":{"row":40,"column":66},"action":"insert","lines":["/*","File: fn_jailSys.sqf","Author: Bryan \"Tonic\" Boardwine","","Description:","I forget?","*/","private[\"_unit\",\"_bad\",\"_id\",\"_ret\",\"_time\"];","_unit = [_this,0,Objnull,[Objnull]] call BIS_fnc_param;","if(isNull _unit) exitWith {};","_bad = [_this,1,false,[false]] call BIS_fnc_param;","_time = [_this,2,15,[0]] call BIS_fnc_param;","","","if(_bad) then //Load time from database","{","diag_log \"[Jailtime] Loading time ...\";","","_query = format[\"SELECT jail_time FROM players WHERE playerid='%2'\", _time, getPlayerUID _unit];","waitUntil{!DB_Async_Active};","_result = [_query,2] call DB_fnc_asyncCall;","_result = (_result select 0);","","diag_log format[\"[Jailtime] reset %1\", _result];","","_time = _result;","}","else //Set time to database","{","diag_log \"[Jailtime] sending jailtime to databse\";","_query = format[\"UPDATE players SET jail_time='%1' WHERE playerid='%2'\", _time, getPlayerUID _unit];","waitUntil{!DB_Async_Active};","_result = [_query,1] call DB_fnc_asyncCall;","};","","diag_log format[\"[Jailtime] for the player %1 is %2\",name _unit , _time];","","_id = owner _unit;","","_ret = [_unit] call life_fnc_wantedPerson;","[[_ret,_bad,_time],\"life_fnc_jailMe\",_id,false] spawn life_fnc_MP;"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":40,"column":66},"end":{"row":40,"column":66},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1421493968810,"hash":"791de1d3bb70a330cec73654ebcdcc441447f8e1"}