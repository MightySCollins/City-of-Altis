{"filter":false,"title":"fn_jail.sqf","tooltip":"/Extracted Code/Server Files/core/civilian/fn_jail.sqf","undoManager":{"mark":0,"position":0,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":48,"column":32},"action":"remove","lines":["/*","\tFile: fn_jail.sqf","\tAuthor: Bryan \"Tonic\" Boardwine","\t","\tDescription:","\tStarts the initial process of jailing.","*/","private[\"_bad\",\"_unit\"];","_unit = [_this,0,ObjNull,[ObjNull]] call BIS_fnc_param;","hint format[\"%1\", _unit];","if(isNull _unit) exitWith {}; //Dafuq?","if(_unit != player) exitWith {}; //Dafuq?","if(life_is_arrested) exitWith {}; //Dafuq i'm already arrested","_bad = [_this,1,false,[false]] call BIS_fnc_param;","player setVariable[\"restrained\",false,true];","player setVariable[\"Escorting\",false,true];","player setVariable[\"transporting\",false,true];","","titleText[localize \"STR_Jail_Warn\",\"PLAIN\"];","hint localize \"STR_Jail_LicenseNOTF\";","player setPos (getMarkerPos \"jail_marker\");","","if(_bad) then","{","\twaitUntil {alive player};","\tsleep 1;","};","","//Check to make sure they goto check","if(player distance (getMarkerPos \"jail_marker\") > 40) then","{","\tplayer setPos (getMarkerPos \"jail_marker\");","};","","[1] call life_fnc_removeLicenses;","if(life_inv_heroinu > 0) then {[false,\"heroinu\",life_inv_heroinu] call life_fnc_handleInv;};","if(life_inv_heroinp > 0) then {[false,\"heroinp\",life_inv_heroinp] call life_fnc_handleInv;};","if(life_inv_coke > 0) then {[false,\"cocaine\",life_inv_coke] call life_fnc_handleInv;};","if(life_inv_cokep > 0) then {[false,\"cocainep\",life_inv_cokep] call life_fnc_handleInv;};","if(life_inv_turtle > 0) then {[false,\"turtle\",life_inv_turtle] call life_fnc_handleInv;};","if(life_inv_cannabis > 0) then {[false,\"cannabis\",life_inv_cannabis] call life_fnc_handleInv;};","if(life_inv_marijuana > 0) then {[false,\"marijuana\",life_inv_marijuana] call life_fnc_handleInv;};","life_is_arrested = true;","","removeAllWeapons player;","{player removeMagazine _x} foreach (magazines player);","","[[player,_bad],\"life_fnc_jailSys\",false,false] spawn life_fnc_MP;","[5] call SOCK_fnc_updatePartial;"]},{"start":{"row":0,"column":0},"end":{"row":50,"column":32},"action":"insert","lines":["/*","\tFile: fn_jail.sqf","\tAuthor: Bryan \"Tonic\" Boardwine","\t","\tDescription:","\tStarts the initial process of jailing.","*/","private[\"_bad\",\"_unit\",\"_time\"]; //-------------Changed---------------","_unit = [_this,0,ObjNull,[ObjNull]] call BIS_fnc_param;","hint format[\"%1\", _unit];","if(isNull _unit) exitWith {}; //Dafuq?","if(_unit != player) exitWith {}; //Dafuq?","if(life_is_arrested) exitWith {}; //Dafuq i'm already arrested","_bad = [_this,1,false,[false]] call BIS_fnc_param;","_time = [_this,2,15,[0]] call BIS_fnc_param;//-------------Changed--------------","","player setVariable[\"restrained\",false,true];","player setVariable[\"Escorting\",false,true];","player setVariable[\"transporting\",false,true];","","titleText[localize \"STR_Jail_Warn\",\"PLAIN\"];","hint localize \"STR_Jail_LicenseNOTF\";","player setPos (getMarkerPos \"jail_marker\");","","if(_bad) then","{","\twaitUntil {alive player};","\tsleep 1;","};","","//Check to make sure they goto check","if(player distance (getMarkerPos \"jail_marker\") > 40) then","{","\tplayer setPos (getMarkerPos \"jail_marker\");","};","","[1] call life_fnc_removeLicenses;","if(life_inv_heroinu > 0) then {[false,\"heroinu\",life_inv_heroinu] call life_fnc_handleInv;};","if(life_inv_heroinp > 0) then {[false,\"heroinp\",life_inv_heroinp] call life_fnc_handleInv;};","if(life_inv_coke > 0) then {[false,\"cocaine\",life_inv_coke] call life_fnc_handleInv;};","if(life_inv_cokep > 0) then {[false,\"cocainep\",life_inv_cokep] call life_fnc_handleInv;};","if(life_inv_turtle > 0) then {[false,\"turtle\",life_inv_turtle] call life_fnc_handleInv;};","if(life_inv_cannabis > 0) then {[false,\"cannabis\",life_inv_cannabis] call life_fnc_handleInv;};","if(life_inv_marijuana > 0) then {[false,\"marijuana\",life_inv_marijuana] call life_fnc_handleInv;};","life_is_arrested = true;","","removeAllWeapons player;","{player removeMagazine _x} foreach (magazines player);","","[[player,_bad,_time],\"life_fnc_jailSys\",false,false] spawn life_fnc_MP;//-------------Changed-----------","[5] call SOCK_fnc_updatePartial;"]}]}]]},"ace":{"folds":[],"scrolltop":269,"scrollleft":0,"selection":{"start":{"row":50,"column":32},"end":{"row":50,"column":32},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":15,"state":"start","mode":"ace/mode/text"}},"timestamp":1421494152436,"hash":"16e55e3bb58ebf282490880febf1a3b3d5a97479"}